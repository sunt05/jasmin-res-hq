# Session: 2025-12-31 (LOCAL) - Update 2

**Issue**: [[PER-393]] / [[PER-394]]

## Research Task Context

**Project**: HW-ER Compound Events Pilot Study for [[Fu Luo]]'s PhD

**Research Question**: How do urban climate effects modulate compound heatwave-extreme rainfall (HW-ER) events in global cities?

**Scientific Requirements**:
1. **Heatwave detection**: Temperature extremes, heat stress indices (wet-bulb, apparent temp)
2. **Extreme rainfall detection**: Precipitation thresholds, intensity
3. **Compound event identification**: Temporal co-occurrence of HW and ER
4. **Urban climate context**: Surface energy balance, land-atmosphere feedbacks

**Target domain**: 882 global cities from Fu's UCDB-based list

**Temporal scope**: 2020-2023 (pilot), eventually 1990-2023

**End use**:
- WRF-SUEWS coupled simulations (needs forcing data)
- Statistical analysis of HW-ER compound events
- Urban vs rural comparison

## Available JASMIN Data

See `data/catalogue.yaml` for paths. Key sources:
- ERA5 surface (`/badc/ecmwf-era5/data/oper/an_sfc/`)
- ERA5 pressure levels (`/badc/ecmwf-era5/data/oper/an_pl/`)
- ERA5-Land (`/badc/ecmwf-era5-land/data/`)
- MIDAS UK obs (`/badc/ukmo-midas-open/`)

## For JASMIN Session

Based on the research requirements above:
1. Decide which variables are needed from which datasets
2. Update `extract_era5_batch.py` VAR_MAP if needed
3. Check if ERA5-Land or other sources are more appropriate for some variables
4. Run extraction for the decided variable set

The script already has a VAR_MAP with common variables - extend as needed.

## Completed This Session
- [x] Added comprehensive VAR_MAP to script with documented variables
- [x] Set sensible defaults (2t, 2d, 10u, 10v, sp, tp)
- [x] Added notes about an_sfc vs fc_sfc archives

## Files Changed
- `20251231-hw-er-pilot/scripts/extract_era5_batch.py` - Extended VAR_MAP, updated docs
